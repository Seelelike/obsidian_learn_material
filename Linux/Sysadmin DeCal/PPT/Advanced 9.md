> 本文由 [简悦 SimpRead](http://ksria.com/simpread/) 转码， 原文地址 [chat.zchat.tech](https://chat.zchat.tech/c/693923ac-d204-8333-a885-754b94dd43ea)

> ChatGPT 是一款供日常使用的 AI 聊天机器人。与最先进的 AI 模型互动，探索创意、解决问题以及提升学习效率。

这篇文章 / 讲稿，其实就是一句话：  
**教当系统管理员的人，怎么保护电脑和服务器上的东西，不被人偷看、乱改、搞瘫痪。**

 

我给你分块说，人话版：

一、为什么要学「安全」
-----------

老师先说：现在什么都连上网了，所以安全特别重要，比如：

 

*   选举、医院、银行这些重要东西都会被黑
    
*   大公司（Equifax）泄露过一堆个人信息
    
*   个人隐私也天天在网上乱飞
    
*   而且：**会安全 = 很好找工作**（安全行业钱多活多）
    

二、什么是「安全」
---------

一句定义：

> **在有坏人存在的情况下，系统还能按本来设计那样正常工作。**


它分三个目标：

1.  **机密性（Confidentiality）**  
    只有该看的才能看。比如别让别人随便看你文件、聊天记录。
    
2.  **完整性 / 真实性（Integrity / Authenticity）**
    
    *   你收到的消息没有被中途改过
        
    *   你知道对面真的是「那个人」，而不是冒充的  
        比如 SIM 卡被换号（SIM swapping），别人假装是你要验证码。
        
         
        
3.  **可用性（Availability）**
    
    *   网站 / 服务得能用
        
    *   被人打挂了（DDOS）你就等于没这个系统  
        「挂着的系统 = 没有系统」。
        
         
        

三、安全的一些「原则」（思路）
---------------

### 1. 安全 = 经济学（trade-off）

 

*   不可能 100% 安全
    
*   保护得越严格，越麻烦 / 越贵
    
*   贵重的东西花大价钱保护，便宜的东西就简单锁一下
    

### 2. 最小权限（Least privilege）

 

*   谁只拿到**他工作需要的最小权限**，不能多
    
*   比如普通用户不该有 root 权限，不该看到密码数据库
    

### 3. 深度防御（Defense in depth）

 

*   不靠一堵墙，搞很多层：防火墙 + 登录验证 + 权限隔离……
    
*   某一层被突破，还有别的层挡着
    

### 4. 完整检查（Complete mediation）

 

*   每一次访问都要检查权限
    
*   不能「大门很严，小门敞开」
    

### 5. 考虑「人」这个弱点（Human factors）

 

*   复杂的安全规则，用户会烦，会乱写密码到便签上
    
*   工具难用（比如 openssl、PGP），大家就不用
    
*   所以要在「安全」和「好用」之间找平衡
    

四、威胁建模：先想清楚你要防什么
----------------

老师强调：**最重要的是「Threat modeling」（威胁建模）**：

 

要自己问自己：

*   我在保护什么？（数据？服务？钱？）
    
*   谁需要访问？
    
*   这些东西值多少钱？
    
*   谁可能来攻击？怎么攻击？
    
*   我花多少成本保护它合适？
    
*   「攻击」不只是黑客，还可能是：
    
    *   生气的员工
        
    *   写 bug 的同事
        
    *   地震、火灾之类的灾害
        

五、四个技术基础积木
----------

整个后半部分就是围绕这四块讲：

 

1.  **认证（Authentication）**：你是谁
    
2.  **加密（Encryption）**：别人看不懂你的东西
    
3.  **哈希（Hashing）**：把一大坨数据变成一个固定长度的「指纹」
    
4.  **签名和证书（Signatures & Certificates）**：证明「真的是我发的」
    

下面简单说每一块讲了啥。

六、认证：怎么确认「你就是你」
---------------

### 1. 密码的问题

 

*   人会乱分享密码、乱记密码
    
*   密码空间有限，容易被暴力破解
    
*   网站乱存明文密码，一泄露一大片
    

**对用户的建议**：

 

*   不要重复用同一个密码
    
*   用密码管理器
    
*   密码尽量长、像句子一样的 passphrase
    

**对系统管理员的建议**：

 

*   永远不要存明文密码，只存哈希
    
*   用靠谱的规则（参考 NIST 指南）
    
*   连续输错多次要锁账号或延迟
    
*   检查代码别把密码日志打出去
    

### 2. 多因素认证（MFA）

 

三个东西：

1.  你知道的（密码 / PIN / 密保问题）
    
2.  你有的（手机上的验证码、硬件钥匙、U2F、YubiKey）
    
3.  你是什么（指纹、人脸、虹膜、生物特征）
    

老师特别说：**尽量别用短信 2FA（容易被换卡攻击）。**

### 3. 集中管理账号：SAML / Kerberos / Zero Trust

*   很多公司里，一个人要登一堆系统：邮箱、工资、代码库……
    
     
    
*   SAML 模型：
    
    *   有「身份提供者」（IdP，比如学校的统一登录）
        
    *   邮箱 / 课程系统等服务（Service Provider）相信 IdP
        
    *   用户只要登一次 IdP，其他服务都用它的证明来认你是谁
        
*   Kerberos：在不安全网络上用「票据」来做登录，密码不直接在网上传。
    
     
    
*   Zero Trust / BeyondCorp：
    
    *   不再认为「进了公司内网就都是好人」
        
    *   每个请求都看用户、设备状态等，再决定给不给访问
        
        

七、加密：让别人看不懂你的秘密
---------------

### 1. 为什么要加密

*   每个人都有不想给别人看的东西：银行账号、聊天记录等
    
*   「藏起来」是不安全的，被找到就完蛋
    
*   加密 = 即使别人拿到数据，看到的也是乱码
    
    

### 2. 对称加密（一个钥匙）


*   用同一把「钥匙」加密和解密（像一把普通锁）
    
*   速度快，现在标准是 AES
    
*   问题：
    
    *   钥匙怎么安全地和对方共享？
        
    *   一个服务给很多人用，怎么管理这么多钥匙？
        

### 3. 非对称加密（公钥 / 私钥）


*   有两把钥匙：**公钥**和**私钥**
    
    *   公钥：到处发，谁都可以拿
        
    *   私钥：自己藏好
        
*   用「你的公钥」加密的东西，只能用「你的私钥」解开
    
*   这样，别人不用事先有秘密渠道，就能给你发「只有你能看」的东西
    

里面举了：

*   RSA：靠「大数分解难」这件事
    
*   ECC：椭圆曲线密码，钥匙更短，但数学更复杂，还有担心标准曲线有后门
    
    

实际使用时：

*   一般先用非对称加密交换一个对称密钥
    
*   后续用对称加密来通信（又安全又快）
    
    

八、哈希：把大数据变成小「指纹」
----------------

### 1. 哈希是啥


*   输入任意长度的数据（1 字节到 100GB 都行）
    
*   输出固定长度的一串字符（比如 256 bit）
    
*   特点：
    
    *   计算快
        
    *   同样输入→永远同样输出
        
    *   有安全性质：难反推、难撞库
        

讲了几个算法：MD5、SHA1（已不安全）、SHA256、SHA512、Keccak 等。


### 2. 用途 1：验证文件没被改（完整性）


*   发布一个大文件时（例如系统镜像），官方同时给一个哈希值
    
*   你从镜像站下载完后，算一遍哈希，看结果是不是一样
    
*   一样 = 文件中途没被人改
    

### 3. 用途 2：存密码（不可逆）


*   网站**只存密码的哈希值**，而不是明文
    
*   用户登录时：再算一遍哈希，跟数据库里对比
    
*   即使数据库被偷，攻击者也只能暴力猜密码
    

还提到：

*   要用 **慢哈希函数**（bcrypt / argon2 / PBKDF2），防止别人用 GPU 疯狂爆破
    
    
*   要加盐（salt）：
    
    *   把用户名或随机值拼在密码里再哈希
        
    *   防止别人用通用的「常见密码哈希表」直接查到你的密码
        
         
        

九、签名和证书：证明「真的是我」
----------------

### 1. 数字签名

 

*   用自己的**私钥**去「签」一段消息（做个特殊的加密）
    
*   别人用你的**公钥**就能验证签名
    
*   如果能验证通过，说明：
    
    *   这消息确实是和这个公钥对应的人发的
        
    *   中途没被改
        

### 2. 证书和 CA（证书链）

 

问题：**我怎么知道「这个公钥」真的是某银行的？**

*   解决办法：找「权威机构（CA）」出来签名：
    
    *   他们给「域名 + 公钥」签一个证书
        
*   你的操作系统里内置了一堆「根证书」（最信任的一批 CA）
    
*   浏览器验证网站证书时，会一路检查到这些根证书的签名链
    
     
    

但老师也说：

*   这个系统不完美，历史上有 CA 做坏事或被攻破的例子（diginotar 等）
    
     
    
*   绿锁≠绝对安全，比如域名长得很像但不是真网站
    

十、文件安全：Linux 权限与所有权
-------------------

讲的是 Unix 系统里怎么用权限保护文件：

 

*   每个「文件」都有：
    
    *   拥有者（user）
        
    *   所属组（group）
        
    *   其他人（other）
        
*   每一类都有 3 个权限：
    
    *   读（r）
        
    *   写（w）
        
    *   执行（x）
        

举例：`rwxr-xr-x`、数字形式 `755/644`，用 `chmod`、`chown` 去改权限和所有者。

 

核心思想：

*   「最小权限」：
    
    *   私钥不要 777
        
    *   不要让所有人都能读你的敏感文件
        
*   程序能不用 root 就不用
    
*   用 setuid/setgid 可以让某些程序 “暂时以另一个身份跑”，但要小心安全风险
    
     
    

十一、网络安全：连上网之后更危险了
-----------------

### 1. 攻击面变大

 

*   以前：只有摸到机器的人才能搞你
    
*   现在：全世界的人都能从网络上扫到你的机器
    
*   一台服务上多开好几个易出漏洞的软件，就更危险
    

举例：

*   SSH 有漏洞 → 别人直接 root 登录
    
*   FTP / 网页程序有目录穿越漏洞 → 直接偷 `/etc/shadow`
    
*   虚拟机里留「test:test」用户 → 被人用来挖矿
    
     
    

### 2. 各种网络攻击类型

 

*   窃听（Wiretapping）
    
*   中间人攻击（MITM）
    
*   拒绝服务（DoS / DDoS）
    
*   各种应用层攻击：SQL 注入、XSS、CSRF、目录遍历、缓冲区溢出、蠕虫、勒索软件、挖矿、钓鱼……
    

### 3. 对应防御思路

*   对于窃听：
    
    *   用 TLS/HTTPS 加密传输，开启 HSTS，避免被降级到 HTTP
        
         
        
*   对于中间人：
    
    *   检查 SSH 指纹、TLS 证书
        
    *   不要无视「证书错误」提示
        
    *   证书透明度、证书固定等机制
        
         
        
*   对于 DDoS：
    
    *   分布式部署、多节点、多地域
        
    *   使用 CDN / Cloudflare 之类
        
    *   不要有放大攻击的易受害服务
        
         
        
*   对于应用漏洞：
    
    *   常更新 / 打补丁
        
    *   不同服务分不同机器 / VM，隔离开
        
    *   能不是 root 就别跑在 root 上
        
    *   防火墙规则尽量严格
        
         
        

十二、持续学习：安全威胁天天变
---------------

老师最后说：最重要的防御，是**持续了解新的威胁**：

 

*   多看 OWASP Top 10 之类的列表
    
*   订阅安全邮件列表，关注你用的软件的安全公告
    
*   看安全会议（Black Hat、DEFCON、USENIX Security…）
    
*   自己去玩红队练习：OverTheWire、HackThisSite、OWASP Juice Shop 等
    

十三、日志和备份：别忘了这俩
--------------

*   **日志（Logging）**：
    
    *   没日志，你连「被打了」都不知道
        
    *   看到有人在疯狂扫端口、暴力 SSH 等
        
    *   最好集中日志到专用服务器，攻击者不容易全删掉
        
         
        
*   **备份（Backups）**：
    
    *   被勒索、硬盘炸了、地震了，有备份就能恢复
        
    *   没备份，安全事件 = 毁灭性打击
        
         
        

最后给你一个「整图」的理解
-------------

这篇文章整套要你记住的就是：

1.  先想清楚你要保护什么、谁会来搞你（威胁建模）
    
2.  用三大目标衡量：机密性、完整性 / 真实性、可用性
    
3.  做设计时遵守：最小权限、多层防御、考虑人性、算经济账
    
4.  靠四块技术砖：**认证 / 加密 / 哈希 / 签名 + 证书** 组合起来
    
5.  系统层面注意：文件权限、网络安全、日志、备份、持续更新与学习
    

如果你愿意，我可以下一步把里面某一块（比如哈希、TLS、权限）单独拿出来，画图 + 例子再拆开讲一遍。