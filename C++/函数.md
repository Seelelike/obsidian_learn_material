> 本文由 [简悦 SimpRead](http://ksria.com/simpread/) 转码， 原文地址 [www.studycpp.cn](https://www.studycpp.cn/basic/chapter2/func-arg/)

未使用的参数
------

在某些情况下，将遇到参数未被使用的函数。

举个小例子：

就像未使用的局部变量一样，编译器会警告已定义但未使用的参数。

函数定义中，函数参数的名称是可选的。因此，在函数参数需要存在但未使用的情况下，可简单地省略名称。没有名称的参数称为未命名参数：

```
#include <iostream>

int getValueFromUser()
{
 	std::cout << "Enter an integer: ";
	int input{};
	std::cin >> input;  

	return input;
}

int main()
{
	int num { getValueFromUser() };

	std::cout << num << " doubled is: " << num * 2 << '\n';

	return 0;
}
```

Google C++ 样式指南建议使用注释来记录未命名参数的名称：

**关键点**

如果简单地删除未使用的函数参数，则对该函数的现有调用将编译失败（因为函数调用将提供比函数可接受更多的参数）。


> 本文由 [简悦 SimpRead](http://ksria.com/simpread/) 转码， 原文地址 [www.studycpp.cn](https://www.studycpp.cn/basic/chapter2/why-func/)

有效的使用函数
-------

新手遇到的最大挑战之一（除了学习语言）是理解何时以及如何有效使用函数。下面是编写函数的一些基本准则：

1.  程序中出现多次的语句组通常应编写成函数。例如，如果以相同方式多次读取用户的输入，组织成函数是很好的解决方法。如果在多个位置以相同的方式输出内容，也可编写成函数。
2.  具有一组定义的输入和输出代码（特别是很复杂时）。例如，如果有一个要排序的列表，那么执行排序的代码是一个很好的函数，即使只被使用一次。输入是未排序的列表，输出是已排序的列表。另一个可组织成函数的功能是模拟六边形骰子投掷结果。当前程序可能只使用一次，但如果将其转换为函数，则在以后扩展程序或在未来的其它程序中重用。
3.  函数通常应执行一个（且只能执行一个）任务。
4.  当函数变得太长、太复杂或难以理解时，可将其划分为多个子函数。称为重构。

通常，学习 C++ 时，将编写许多多个子任务的程序：

对于琐碎的程序（例如，少于 20 行代码），其中一些或全部可以在函数 main 中完成。然而，对于较长的程序，单个函数更好。

新手通常将计算值和打印计算值结合到单个函数中。然而，这违反了函数的 “一个任务” 经验法则。计算值的函数将值返回给调用方，并让调用方决定如何处理结果（比如调用另一个函数打印值）。

> 本文由 [简悦 SimpRead](http://ksria.com/simpread/) 转码， 原文地址 [www.studycpp.cn](https://www.studycpp.cn/basic/chapter2/forward-declare/)

单定义规则
-----

单定义规则（简称 ODR，The one definition rule）是 C++ 众所周知的规则。ODR 由三部分组成：

1.  同一文件中的同一作用域内，函数，变量，类型，模版只能定义一次。不同作用域的同名定义不违反此规则。（例如不同函数中的同名变量，不同命名空间内的同名函数）
2.  同一程序中，函数或者变量只能定义一次。因为程序可能有多个文件，发生冲突时无法处理。不被链接器可见的定义不受此规则限制。
3.  类型，模版，内联函数，内联变量可在多个文件中同时定义。只要它们的定义是一致的。

以上情形，大多数还未讲到，后面在对应的知识点时会再次讲解。

违反 ODR 的第 1 条将导致编译器发出重新定义错误。违反 ODR 第 2 条将导致链接器发出重新定义错误或导致未定义的行为。违反 ODR 第 3 条将导致未定义的行为。

下面是违反规则一的示例：

由于上述程序违反 ODR 规则一，这导致 Visual Studio 编译器发出以下编译错误：

```
#include <iostream>

int main()
{
    std::cout << "The sum of 3 and 4 is: " << add(3, 4) << '\n';
    return 0;
}

int add(int x, int y)
{
    return x + y;
}
```

ODR 不适用于纯声明（它是描述定义的规则，而不是关于声明的规则），因此可按需为标识符提供任意多的纯声明（尽管多个纯声明是多余的）。

**对于高级读者**

有不同参数的同名函数是不同的函数。在函数重载章节会讨论。